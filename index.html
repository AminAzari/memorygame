<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<title>Ø¨Ø§Ø²ÛŒ Ø§Ø±ØªØ¨Ø§Ø· Ù…ÙÙ‡ÙˆÙ…ÛŒ</title>

<style>
body{margin:0;font-family:tahoma;background:#000;color:white;text-align:center}

#start,#countdown,#end{
position:fixed;inset:0;display:flex;flex-direction:column;
justify-content:center;align-items:center;background:#111;z-index:5
}

#countdown,#end{display:none}

input,button{padding:10px;margin:8px;font-size:18px}

#info{margin-top:10px;font-size:18px}

.active{color:yellow;text-shadow:0 0 10px yellow;font-weight:bold}

#game{
width:420px;margin:20px auto;
display:grid;grid-template-columns:repeat(4,1fr);
gap:10px;perspective:1000px
}

.card{
height:80px;position:relative;transform-style:preserve-3d;
transition:.5s;cursor:pointer
}

.card.flip{transform:rotateY(180deg)}

.face{
position:absolute;width:100%;height:100%;
border-radius:10px;display:flex;
align-items:center;justify-content:center;
font-size:14px;padding:5px;box-sizing:border-box;
backface-visibility:hidden
}

.back{background:#222}
.front{background:white;color:black;transform:rotateY(180deg)}

.p1 .front{background:#2196f3}
.p2 .front{background:#f44336}

.shake{animation:shake .3s}
@keyframes shake{
0%{transform:translateX(0)}
25%{transform:translateX(-5px)}
50%{transform:translateX(5px)}
75%{transform:translateX(-5px)}
100%{transform:translateX(0)}
}
</style>
</head>

<body>
<div id="passwordScreen" style="
position:fixed;inset:0;
background:#000;
display:flex;
flex-direction:column;
justify-content:center;
align-items:center;
z-index:999;
color:white;
">

<h2>ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø¨Ø§Ø²ÛŒ</h2>

<input id="passInput" type="password" placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±" style="padding:10px;font-size:18px">

<button onclick="checkPassword()" style="margin-top:10px;padding:10px 30px">
ÙˆØ±ÙˆØ¯
</button>

<p id="passError" style="color:red"></p>

</div>


<div id="start">
<h1>Ø¨Ø§Ø²ÛŒ Ø§Ø±ØªØ¨Ø§Ø· Ù…ÙÙ‡ÙˆÙ…ÛŒ</h1>
<input id="name1" placeholder="Ø¨Ø§Ø²ÛŒÚ©Ù† Ø§ÙˆÙ„">
<input id="name2" placeholder="Ø¨Ø§Ø²ÛŒÚ©Ù† Ø¯ÙˆÙ…">
<button onclick="prepare()">Ø´Ø±ÙˆØ¹</button>
</div>

<div id="countdown"></div>

<div id="info" style="display:none">
<span id="p1"></span>: <span id="s1">0</span> |
<span id="p2"></span>: <span id="s2">0</span><br>
Ù†ÙˆØ¨Øª: <span id="turn"></span><br>
Ø²Ù…Ø§Ù†: <span id="time">0</span>
</div>

<div id="game"></div>

<div id="end">
<h1 id="winner"></h1>
<p id="final"></p>
<button onclick="location.reload()">Ø´Ø±ÙˆØ¹ Ù…Ø¬Ø¯Ø¯</button>
</div>

<!-- sounds -->
<audio id="clickSound" src="click.mp3"></audio>
<audio id="successSound" src="success.mp3"></audio>
<audio id="failSound" src="fail.mp3"></audio>

<script>
const GAME_PASSWORD="ramz";   // â† Ø§ÛŒÙ†Ø¬Ø§ Ø±Ù…Ø² Ø¯Ù„Ø®ÙˆØ§Ù‡Øª

function checkPassword(){
if(passInput.value===GAME_PASSWORD){
document.getElementById("passwordScreen").style.display="none";
}else{
passError.innerText="Ø±Ù…Ø² Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª";
}
}
/* Ø¬ÙØª Ù‡Ø§ÛŒ Ù…ÙÙ‡ÙˆÙ…ÛŒ */

let rawPairs=[
["Ø³Ø§Ù…Ø±Ø§","Ù…Ø­Ù„ ØªÙˆÙ„Ø¯"],
["255 Ù‚Ù…Ø±ÛŒ","Ø³Ø§Ù„ ØªÙˆÙ„Ø¯"],
["Ø§Ù…Ø§Ù… Ø¹Ø³Ú©Ø±ÛŒ","Ù†Ø§Ù… Ù¾Ø¯Ø±"],
["15 Ø´Ø¹Ø¨Ø§Ù†","Ø±ÙˆØ² Ù…ÛŒÙ„Ø§Ø¯"],
["Ù†ÙˆØ´ØªÙ‡ Ù‡Ø§ÛŒ Ø§Ù…Ø§Ù… Ø¯Ø± ØºÛŒØ¨Øª ØµØºØ±ÛŒ","ØªÙˆÙ‚ÛŒØ¹Ø§Øª"],
["Ø¯Ù„ÛŒÙ„ÛŒ Ø¨Ø± Ø§Ù…Ú©Ø§Ù† Ø¹Ù…Ø± Ø·ÙˆÙ„Ø§Ù†ÛŒ","Ø§ØµØ­Ø§Ø¨ Ú©Ù‡Ù"],
["Ø±ÙˆØ§ÛŒØ§Øª Ø§Ù‡Ù„ Ø³Ù†Øª Ø§Ø² ÙˆÙ„Ø§Ø¯Øª Ø§Ù…Ø§Ù…","ØªØ§Ø±ÛŒØ® Ø§Ø¨Ù†â€ŒØ§Ø«ÛŒØ±"],
["Ù†Ø§Ø¦Ø¨ Ø¯ÙˆÙ… Ø§Ù…Ø§Ù…","Ù…Ø­Ù…Ø¯ Ø¹Ù…Ø±ÛŒ"]
];

const start=document.getElementById("start");
const countdown=document.getElementById("countdown");
const game=document.getElementById("game");
const info=document.getElementById("info");

const clickSound=document.getElementById("clickSound");
const successSound=document.getElementById("successSound");
const failSound=document.getElementById("failSound");

let cards=[];
rawPairs.forEach((p,i)=>{
cards.push({text:p[0],pair:i});
cards.push({text:p[1],pair:i});
});

let first=null,lock=false,player=1;
let s1=0,s2=0,matched=0,time=0,timer;
let n1,n2;

function updateTurn(){
turn.innerText=player===1?n1:n2;
turn.className="active";
}

function prepare(){
n1=name1.value||"Ø¨Ø§Ø²ÛŒÚ©Ù† Û±";
n2=name2.value||"Ø¨Ø§Ø²ÛŒÚ©Ù† Û²";

start.style.display="none";
countdown.style.display="flex";

let c=3;
countdown.innerText=c;

let cd=setInterval(()=>{
c--;
if(c===0){
clearInterval(cd);
countdown.style.display="none";
startGame();
}else countdown.innerText=c;
},1000);
}

function startGame(){

info.style.display="block";
p1.innerText=n1;
p2.innerText=n2;
updateTurn();

timer=setInterval(()=>{
time++;
timeSpan.innerText=time;
},1000);

cards.sort(()=>Math.random()-.5);

cards.forEach((obj,i)=>{

let card=document.createElement("div");
card.className="card";
card.dataset.pair=obj.pair;

card.innerHTML=`
<div class="face back">${i+1}</div>
<div class="face front">${obj.text}</div>
`;
card.onclick=()=>{

if(lock||card.classList.contains("flip"))return;

clickSound.currentTime=0;
clickSound.play();

card.classList.add("flip");

if(!first){
first=card;
}else{
lock=true;

if(first.dataset.pair===card.dataset.pair){

successSound.currentTime=0;
successSound.play();

let cls=player===1?"p1":"p2";
first.classList.add(cls);
card.classList.add(cls);

player===1?s1++:s2++;
s1Span.innerText=s1;
s2Span.innerText=s2;

matched+=2;
first=null;
lock=false;

if(matched===cards.length) endGame();

}else{

failSound.currentTime=0;
failSound.play();

game.classList.add("shake");
setTimeout(()=>game.classList.remove("shake"),300);

setTimeout(()=>{
first.classList.remove("flip");
card.classList.remove("flip");
player=player===1?2:1;
updateTurn();
first=null;
lock=false;
},800);
}
}
};

game.appendChild(card);
});
}

function endGame(){
clearInterval(timer);
end.style.display="flex";

winner.innerText=
s1>s2?`${n1} Ø¨Ø±Ù†Ø¯Ù‡ Ø´Ø¯ ğŸ†`:
s2>s1?`${n2} Ø¨Ø±Ù†Ø¯Ù‡ Ø´Ø¯ ğŸ†`:
"Ù…Ø³Ø§ÙˆÛŒ ğŸ¤";

final.innerText=`${n1}: ${s1} | ${n2}: ${s2} | Ø²Ù…Ø§Ù†: ${time} Ø«Ø§Ù†ÛŒÙ‡`;
}

const s1Span=document.getElementById("s1");
const s2Span=document.getElementById("s2");
const timeSpan=document.getElementById("time");

</script>

</body>
</html>